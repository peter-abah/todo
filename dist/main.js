(()=>{var e={798:function(e,t,o){e=o.nmd(e),function(o,n){"use strict";var r={};o.PubSub=r,function(e){var t={},o=-1;function n(e,t,o){try{e(t,o)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function r(e,t,o){e(t,o)}function i(e,o,i,c){var l,s=t[o],a=c?r:n;if(Object.prototype.hasOwnProperty.call(t,o))for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&a(s[l],e,i)}function c(e){var o=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,o)&&function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}(t[o]))}function l(e,t,o,n){var r=function(e,t,o){return function(){var n=String(e),r=n.lastIndexOf(".");for(i(e,e,t,o);-1!==r;)r=(n=n.substr(0,r)).lastIndexOf("."),i(e,n,t,o);i(e,"*",t,o)}}(e="symbol"==typeof e?e.toString():e,t,n);return!!function(e){for(var t=String(e),o=c(t)||c("*"),n=t.lastIndexOf(".");!o&&-1!==n;)n=(t=t.substr(0,n)).lastIndexOf("."),o=c(t);return o}(e)&&(!0===o?r():setTimeout(r,0),!0)}e.publish=function(t,o){return l(t,o,!1,e.immediateExceptions)},e.publishSync=function(t,o){return l(t,o,!0,e.immediateExceptions)},e.subscribe=function(e,n){if("function"!=typeof n)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var r="uid_"+String(++o);return t[e][r]=n,r},e.subscribeAll=function(t){return e.subscribe("*",t)},e.subscribeOnce=function(t,o){var n=e.subscribe(t,(function(){e.unsubscribe(n),o.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var o;for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&0===o.indexOf(e)&&delete t[o]},e.countSubscriptions=function(e){var o,n,r=0;for(o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&0===o.indexOf(e)){for(n in t[o])r++;break}return r},e.getSubscriptions=function(e){var o,n=[];for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&0===o.indexOf(e)&&n.push(o);return n},e.unsubscribe=function(o){var n,r,i,c="string"==typeof o&&(Object.prototype.hasOwnProperty.call(t,o)||function(e){var o;for(o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&0===o.indexOf(e))return!0;return!1}(o)),l=!c&&"string"==typeof o,s="function"==typeof o,a=!1;if(!c){for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r=t[n],l&&r[o]){delete r[o],a=o;break}if(s)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&r[i]===o&&(delete r[i],a=!0)}return a}e.clearSubscriptions(o)}}(r),void 0!==e&&e.exports&&(t=e.exports=r),t.PubSub=r,e.exports=t=r}("object"==typeof window&&window||this)}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=o(798),t=o.n(e);const n={TODO_CREATED:Symbol("todo_created"),TODO_DELETED:Symbol("todo_deleted"),TODO_UPDATED:Symbol("todo_updated"),NEW_TODO:Symbol("new_todo"),DELETE_TODO:Symbol("delete_todo"),UPDATE_TODO:Symbol("update_todo"),SHOW_TODOS:Symbol("show_todos"),NEW_COLLECTION:Symbol("new_collection"),DELETE_COLLECTION:Symbol("delete_collection"),UPDATE_COLLECTION:Symbol("update_collection"),COLLECTION_CREATED:Symbol("collection_created"),COLLECTION_UPDATED:Symbol("collection_updated"),COLLECTION_DELETED:Symbol("collection_deleted")};function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function i(e){r(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function c(e){r(1,arguments);var t=i(e);return t.setHours(0,0,0,0),t}function l(e,t){r(2,arguments);var o=c(e),n=c(t);return o.getTime()===n.getTime()}function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function a(e,t){r(2,arguments);var o=i(e),n=s(t);return isNaN(n)?new Date(NaN):n?(o.setDate(o.getDate()+n),o):o}document.querySelectorAll(".categories__btn"),(()=>{const e=e=>{const o=e.target.getAttribute("data-collection");t().publish(n.SHOW_TODOS,{collectionId:o})},o=document.querySelector(".collection"),r=[...document.querySelectorAll(".collection__btn")],i=document.querySelector(".collection__btn-add"),c=document.querySelector(".collection__form"),l=document.getElementById("collection-name");t().subscribe(n.COLLECTION_CREATED,(({collection:t})=>{const n=document.createElement("button");n.classList.add("collection__btn"),n.textContent=t.name,n.setAttribute("data-collection",t.id),n.addEventListener("click",e),o.appendChild(n)})),r.forEach((t=>t.addEventListener("click",e))),i.addEventListener("click",(e=>{c.classList.toggle("collection__form--hidden")})),c.addEventListener("click",(e=>{e.preventDefault();const o=l.value;t().publish(n.NEW_COLLECTION,{name:o})}))})();const d={clearElement:e=>{for(;e.lastChild();)e.lastChild().remove()},filterObject:(e,t)=>Object.keys(e).reduce(((o,n)=>(t(e[key],key)&&(o[key]=e[key]),o)),{})},u=(e,o,r,i,c)=>(t().subscribe(n.UPDATE_TODO,(e=>{if(c===e.id){for(let t of Object.keys(e.info))"id"!==t&&self.hasOwnProperty(t)||next,self[t]=e.info[t];t().publish(n.TODO_UPDATED,{id:self.id,changed:[Object.keys(e.info)]})}})),self={title:e,description:o,priority:r,dueDate:i,id:c,completed:!1},self),p=(()=>{let e=-1;const o={};return t().subscribe(n.NEW_COLLECTION,(({name:r})=>{const i=((e,o)=>{const r={};let i=-1;t().subscribe(n.NEW_TODO,(e=>{const{title:c,description:l,priority:s,dueDate:a}=e.info;i++,todoId=`${o} ${i}`;let d=u(c,l,s,a,todoId);r[todoId]=d,t().publish(n.TODO_CREATED,{todo:d,id:todoId})})),t().subscribe(n.DELETE_TODO,(({id:e})=>{delete r[e],t().publish(n.TODO_DELETED,{id:e})})),t().subscribe(n.UPDATE_COLLECTION,(e=>{o===e.id&&(c.name=e.name,t().publish(n.COLLECTION_UPDATED,{id:o,self:c}))}));const c={name:e,id:o,todos:r};return c})(r);o[++e]=i,t().publish(n.COLLECTION_CREATED,{id:e,collection:i})})),t().subscribe(n.DELETE_COLLECTION,(({id:e})=>{delete o[e],t().publish(n.COLLECTION_DELETED,{id:e})})),o})();(()=>{const e=e=>{let t;if(e.category)t=f[e.category]();else{if(!e.collection)return;t=b[e.collection]}const n=o(t);d.clearElement(O.content),O.content.appendChild(n)},o=e=>{c(e,(e=>!1===e.completed));let t=c(e,(e=>!0===e.completed)),o=headerTemplate(e);o.appendChild(O.addTodoBtn);let n=document.createElement("section");return n.appendChild(o),n.appendChild(t),n.appendChild(todosElem),todosWrapper},c=(e,t)=>{t||(t=()=>!0);let o=document.createElement("div");return e.todos.forEach((e=>{if(t(e)){let t=O[e.id]||TodoElem(e);O[e.id]=t,o.appendChild(t)}})),o},u=()=>b.reduce(((e,t)=>(e.collection=Object.assign(e.todos,t.todos),e)),{name:"All",todos:{}}),b=p,f={all:u,today:()=>({name:"Today",todos:d.objectFilter(u().todos,(e=>function(e){return r(1,arguments),l(e,Date.now())}(e.dueDate)))}),tommorow:()=>({name:"Tommorow",todos:d.objectFilter(u().todos,(e=>function(e){return r(1,arguments),l(e,a(Date.now(),1))}(e.dueDate)))}),next7Days:()=>{const e=function(e,t){r(2,arguments);var o=s(t);return a(e,7*o)}(new Date,1);let t=d.objectFilter(u().todos,(t=>function(e,t){r(2,arguments);var o=i(e),n=i(t);return o.getTime()<n.getTime()}(t.dueDate,e)));return{name:"Next 7 Days",todos:t}}},O={content:document.getElementById("content")};t().subscribe(n.SHOW_TODOS,e),t().subscribe(n.TODO_CREATED,e),t().subscribe(n.TODO_UPDATED,(({id:e,changed:t})=>{t.includes("completed")&&O[e].classList.toggle("todo--completed")})),t().subscribe(n.TODO_DELETED,(({id:e})=>{O[e].remove(),delete O[e]}))})()})()})();